!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);!function(){const e=document.querySelector("h1"),t=document.querySelector("button"),r=t=>{e.innerText=t};class n{constructor(e=document.body){this.targetEl=e}heading(e=2,t=""){const r=e&&e>0&&e<=6,n=r?document.createElement(`h${e}`):document.createElement("h2");n.innerHTML=r?t:"Неккоректный номер заголовка",this.targetEl.appendChild(n)}}class o{static option(e,t=""){const r=document.createElement("option");r.value=t,r.innerText=t,e.appendChild(r)}}class s{constructor(e=[],t=document.body){this._filmsTarget=e,this._addingMessage=new n(t),this._state=this._filmsTarget.reduce((e,t)=>{if(t.title&&(e.films[t.title]=s._deleteKeys(t,"title"),t.actors&&(e.films[t.title].actorsName=s._getNamesInArrObjects(t.actors)),this._addingMessage.heading(2,`Фильм: ${t.title}`)),t.director&&t.director.name&&(e.directors[t.director.name]=s._deleteKeys(t.director,"name"),e.directors[t.director.name].filmTitle=t.title,this._addingMessage.heading(3,`Режжисер: ${t.title}`)),t.actors){const r=s._conversionArrToObject(t.actors);Object.assign(e.actors,r),this._addingMessage.heading(5,`Актеры: ${Object.keys(r).join(", ")}`)}return this._addingMessage.heading(2,"***"),e},{actors:{},directors:{},films:{}})}get directors(){return this._state.directors}get state(){return this._state}static _conversionArrToObject(e){const t={};return e.forEach(e=>{const r=e.name||e.title;r&&(t[r]=Object.assign({},s._deleteKeys(e,"name","title")))}),t}static _deleteKeys(e,...t){const r=Object.assign({},e);return t.forEach(e=>{delete r[e]}),r}static _getNamesInArrObjects(e){const t=[];return e.forEach(e=>{e.name&&t.push(e.name)}),t}averageAgeActors(e="",t=0){const{directors:r,actors:n,films:o}=this._state,s=[],c=[];return Object.keys(r).forEach(n=>{+r[n].oscarsCount==+t&&n===e&&s.push(n)}),s.length?(Object.keys(o).forEach(e=>{o[e].director&&o[e].actors&&~s.indexOf(o[e].director.name)&&o[e].actors.forEach(e=>{e.name&&c.push(e.name)})}),c.reduce((e,t)=>e+(n[t].age||0),0)/c.length):void 0}jointRole(e="Tom Hanks",t=1995){const{films:r}=this._state,o=(new n,[]);Object.keys(r).forEach(e=>{r[e].creationYear>t&&o.push(e)});let s=o.reduce((t,n)=>{const o=[];return r[n].actors&&r[n].actors.forEach(e=>{o.push(e.name)}),window.arr1=t,window.arr2=o,~o.indexOf(e)?t.concat(o):t},[]);return s.filter(t=>t!==e)}amountBudgetWithoyActor(e=70,t="Tom Hanks"){const{directors:r,actors:n,films:o}=this._state,s=[];return Object.keys(r).forEach(t=>{r[t].age<e&&s.push(t)}),Object.keys(o).reduce((e,r)=>{const n=o[r];if(~s.indexOf(n.director.name)&&!~n.actorsName.indexOf(t)){const t=parseInt(n.budget.replace(/\D/g,""),10);e=t?e+t:e}return e},0)}}const c=(e,t="",r=0)=>{const n=document.querySelector(".actors-average-age"),o=e.averageAgeActors(t,r),s=o?`1. Средний возраст актеров: ${+o.toFixed(2)}`:"1. Нет данных по выбранным значениям";console.log(s),n.innerHTML=s},a=e=>{const a=document.querySelector(".films-info"),i=document.querySelector(".film-inputs"),u=new s(e,a),d=new n;r("Данные загружены.\n\n***"),t.style.display="none",((e={},t)=>{const r=document.querySelector("[name = 'directors']"),n=document.querySelector("[name = 'oscarCount']"),s=[];Object.keys(e).forEach(t=>{const c=+e[t].oscarsCount||0;o.option(r,t),~s.indexOf(c)||(o.option(n,e[t].oscarsCount),s.push(c))}),r.value&&n.value&&t&&(c(t,r.value,n.value),Array.of(r,n).forEach(e=>{e.addEventListener("change",()=>c(t,r.value,n.value))}))})(u.directors,u);const l=u.jointRole(),f=l.length?`2. Имена всех актеров, которые играли с Томом Хэнксом, в фильмах после 1995 года: ${l.join(", ")}`:"2. Нет актеров, которые играли с Томом Хэнксом, в фильмах после 1995 года.";d.heading(2,f),console.log(f);const h=`3. Общий бюджет (сумма) фильмов, с режиссерами младше 70 лет и в которых не играл Том Хэнкс: $${u.amountBudgetWithoyActor()}`;console.log(h),d.heading(2,h),i.style.display="block"};t.addEventListener("click",()=>{r("Обновление данных..."),fetch("./films.json").then(e=>e.json()).then(a).catch(r)})}()}]);